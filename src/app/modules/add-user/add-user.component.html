
<div mat-dialog-title class="title">
    <h1><b>ADD USER INFORMATION FORM</b></h1>
</div>

<div mat-dialog-content class="content">
    <form [formGroup]="addUserForm" (ngSubmit)="postdata()">
        <div class="row">
            <mat-label><b>College/Campus Name <i>(long name)</i></b></mat-label>
            <mat-form-field appearance="outline">
                <input matInput type="text" placeholder="College of Architecture and Allied Disciplines"
                name="campus_name" formControlName="campus_name">
                <mat-error *ngIf="addUserForm.get('campus_name')?.errors?.['required']">
                    <span>
                      This field is required
                    </span>
                </mat-error>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-label><b>College/Campus Name <i>(short name)</i></b></mat-label>
            <mat-form-field appearance="outline">
                <input matInput type="text" placeholder="CAAD"
                name="name" formControlName="name">
                <mat-error *ngIf="addUserForm.get('name')?.errors?.['required']">
                    <span>
                      This field is required
                    </span>
                </mat-error>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-label ><b>Username</b></mat-label>
            <mat-form-field appearance="outline">
                <input matInput type="text" name="username" formControlName="username" placeholder="John Doe">
                <mat-error *ngIf="addUserForm.get('username')?.errors?.['required']">
                    <span>
                      This field is required
                    </span>
                </mat-error>
            </mat-form-field>
        </div>
        
        <div class="row">
            <mat-label ><b>Useremail</b></mat-label>
            <mat-form-field appearance="outline">
                <input matInput type="email" name="user_email" formControlName="user_email" placeholder="example@evsu.edu.ph">
                <mat-error *ngIf="addUserForm.get('user_email')?.errors?.['required']">
                    <span>
                      This field is required
                    </span>
                </mat-error>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-label><b>Password</b></mat-label>
            <mat-form-field appearance="outline">
                <input name="password" formControlName="password" matInput [type]=" hidePassword ? 'password' : 'text'" required />
                <button  mat-icon-button matSuffix (click)="hidePassword = !hidePassword" [attr.aria-label]="'Hide Password'"
                [attr.aria-pressed]="hidePassword">
                  <mat-icon>
                      {{hidePassword ? 'visibility_off' : 'visibility'}}
                  </mat-icon>
                </button>
                <mat-error *ngIf="addUserForm.get('password')?.invalid">
                    <span *ngIf="addUserForm.get('password')?.errors?.['required']">
                      This field is required
                    </span>
                    <span *ngIf="addUserForm.get('password')?.errors?.['minLength']">
                        Password must be in 8 length
                      </span>
                </mat-error>
            </mat-form-field>
        </div>
        
        <div class="row">
            <mat-label><b>Confirm Password</b></mat-label>
            <mat-form-field appearance="outline">
                <input name="cpassword" formControlName="cpassword" matInput [type]=" hideCPassword ? 'password' : 'text'" required />
                <button  mat-icon-button matSuffix (click)="hideCPassword = !hideCPassword" [attr.aria-label]="'Hide Password'"
                [attr.aria-pressed]="hideCPassword">
                  <mat-icon>
                      {{hideCPassword ? 'visibility_off' : 'visibility'}}
                  </mat-icon>
                </button>

                <mat-error *ngIf="addUserForm.get('cpassword')?.invalid">
                    <span *ngIf="addUserForm.get('cpassword')?.errors?.['MustMatch']">
                      Confirm password didn't match
                    </span>
                    <span *ngIf="addUserForm.get('cpassword')?.errors?.['required']">
                        This field is required  
                      </span>
                  </mat-error>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-label ><b>Role</b></mat-label>
            <mat-form-field appearance="outline">
                <mat-select name="user_role" formControlName="user_role" placeholder="Choose role">
                    <mat-option value="ADMIN">Admin</mat-option>
                    <mat-option value="AUTHOR">Author</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

        <div class="row">
            <mat-label><b>Attachment</b></mat-label>
            <input type="file" name="file" formControlName="file" accept=".png, .jpg, .jpeg" (change)="onFileSelected($event)" style="margin-bottom: 20px;">
        </div>

        <div mat-dialog-actions class="dialogbtn">
            <button mat-raised-button type="button" color="warn" (click)="dialogClose()">Cancel</button>
            <button mat-raised-button color="primary" type="submit">Save</button>
        </div>
    </form>
</div>